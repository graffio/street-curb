migration_specification:
  version: 1.0
  description: "Migrate right-of-way-editor components to use design system with Radix Themes and Vanilla Extract"

target_components:
  primary:
    - name: "CurbTable.jsx"
      complexity: complex
      current_styling: "CSS classes in index.css (lines 272-1161)"
      migration_type: "full component replacement"
      dependencies: ["Table.jsx", "Select.jsx"]

  extracted_components:
    - name: "Table.jsx"
      location: "modules/right-of-way-editor/src/components/"
      purpose: "Generic table using Radix Table primitives"
      promotion_candidate: true

    - name: "Select.jsx"
      location: "modules/right-of-way-editor/src/components/"
      purpose: "Generic select using Radix Select primitives"
      promotion_candidate: true

implementation_strategy:
  phases:
    - phase: 2
      description: "Extract generic Table and Select components"
      approach: "developer subagent"
      deliverables:
        - "Table.jsx using Radix Table primitives"
        - "Table.css.js with Vanilla Extract styles"
        - "Select.jsx using Radix Select primitives"
        - "Select.css.js with Vanilla Extract styles"

    - phase: 3
      description: "Create CurbTableNew.jsx using extracted components"
      approach: "developer subagent"
      deliverables:
        - "CurbTableNew.jsx using Table and Select components"
        - "CurbTableNew.css.js for custom table styling"
        - "CurbTable.stories.jsx comparing original vs new"

    - phase: 4
      description: "Validation and replacement"
      approach: "direct collaboration"
      deliverables:
        - "Storybook validation of all New components"
        - "Replace original components with New versions"
        - "Clean up old CSS from index.css"

technical_requirements:
  styling_system:
    - "All CSS must use Vanilla Extract CSS-in-JS"
    - "Components must integrate with MainTheme from design-system"
    - "No inline styles except for dynamic positioning"

  radix_integration:
    - "Use Radix Table primitives for table components"
    - "Use Radix Select primitives for dropdown components"
    - "Maintain existing functionality and behavior"
    - "Preserve mobile responsiveness and accessibility"

  code_standards:
    - "Follow A001 coding standards compliance"
    - "Include proper @sig annotations for all functions"
    - "Maintain functional programming patterns"
    - "Use named exports only"

migration_mapping:
  draggable_divider:
    current:
      styling: "inline styles for cursor, touchAction, dimensions"
      elements: "single div with event handlers"
    migrated:
      styling: "Vanilla Extract styles with hover states"
      elements: "div with MainTheme integration"

  curb_table:
    current:
      elements: "HTML table, button, custom dropdown"
      styling: "CSS classes from index.css lines 272-1161"
      dropdown: "custom positioned div with click handlers"
    migrated:
      elements: "Radix Table, Radix Select components"
      styling: "Vanilla Extract with MainTheme tokens"
      dropdown: "Radix Select with proper accessibility"

validation_criteria:
  functional:
    - "All existing functionality preserved in New components"
    - "Mobile responsiveness maintained"
    - "Touch interactions work correctly"
    - "Redux integration unchanged for CurbTable"

  visual:
    - "Components match original visual design"
    - "MainTheme integration provides consistent styling"
    - "Dark mode support maintained"
    - "Responsive breakpoints preserved"

  technical:
    - "A001 coding standards compliance"
    - "Storybook stories show original vs new comparison"
    - "No console errors or warnings"
    - "Proper TypeScript-style prop validation"

success_metrics:
  - "DraggableDividerNew.jsx functions identically to original"
  - "CurbTableNew.jsx maintains all Redux functionality"
  - "Table.jsx and Select.jsx are reusable across components"
  - "Storybook stories demonstrate equivalent functionality"
  - "CSS footprint reduced by using design system tokens"
  - "Components ready for potential promotion to design-system"
