spec_format:
  version: 1.0
  description: "Structure and validation rules for LLM specifications"

files:
  - meta.yaml: "System metadata (spec_id, name, files)"
  - llm-loader.md: "LLM bootstrap instructions"
  - logic.yaml: "Implementation rules and data model"
  - tests.yaml: "Validation test cases (optional)"
  - overview.md: "Human context (optional)"

granularity_levels:
  phase_level: "Abstract phases - good for planning, bad for LLM execution"
  task_level: "Specific tasks - good for LLM execution, requires execution_status"

task_level_specifications:
  required_structure:
    - task_id: "task_X_Y_description pattern"
    - description: "Clear task description"
    - commands: "Specific commands to execute"
    - files: "Files to modify"
    - changes: "Specific changes to make"
    - validation: "Validation criteria"
  
  validation_patterns:
    - file_exists: "Check if file was created"
    - no_errors: "Verify no console or build errors"
    - functionality_preserved: "Ensure existing functionality works"
    - visual_consistency: "Verify no visual regressions"
    - imports_work: "Test that imports function correctly"
    - tests_pass: "Ensure all tests still pass"

execution_status_tracking:
  required_section: "All task-level specs must include execution_status"
  structure:
    - current_task: "Task ID of next task to execute"
    - completed_tasks: "List of completed tasks with status COMPLETED"
    - pending_tasks: "List of remaining tasks with status PENDING or NEXT"
    - failed_tasks: "List of failed tasks with status FAILED"
    - notes: "Current state notes"
  
  status_values:
    - COMPLETED: "Task completed successfully"
    - NEXT: "Next task to execute"
    - PENDING: "Task waiting to be executed"
    - FAILED: "Task failed, needs attention"
    - IN_PROGRESS: "Task currently being executed"
  
  execution_control: "Execute ONLY current task, then STOP and wait for human guidance"

rules:
  - Each spec must contain: meta.yaml, llm-loader.md, logic.yaml
  - All file names must be unique within the spec
  - Specs must be modular and loadable without prior context
  - Task-level specs must include execution_status section
  - Tasks should be independent and rollback-friendly
  - Task IDs must follow task_X_Y_description pattern
