{
    "feature": "AST/DSL Reorganization",
    "goal": "Reorganize cli-style-validator DSL code into clear folders, add naming conventions, rename Query types to Nodes/Lines",
    "templates_used": ["implement-feature.md", "commit-changes.md"],
    "steps": [
        {
            "step": 1,
            "action": "Create src/lib/dsl/ and src/lib/shared/ directories",
            "done": false
        },
        {
            "step": 2,
            "action": "Move ast.js and source.js to src/lib/dsl/",
            "done": false
        },
        {
            "step": 3,
            "action": "Move predicates.js, aggregators.js, factories.js to src/lib/shared/",
            "done": false
        },
        {
            "step": 4,
            "action": "Find all files importing from ../ast, ../source, ../predicates, ../aggregators, ../factories",
            "done": false
        },
        {
            "step": 5,
            "action": "Update imports in all rule files to use new paths (../dsl/ast.js, ../shared/predicates.js, etc.)",
            "done": false
        },
        {
            "step": 6,
            "action": "Update imports in dsl files that reference shared files (ast.js imports nothing, source.js imports ast.js)",
            "done": false
        },
        {
            "step": 7,
            "action": "Run tests to verify all imports resolve correctly",
            "done": false
        },
        {
            "step": 8,
            "action": "[CHECKPOINT] Ask if README.md documenting the DSL API is wanted (conventions say avoid proactive documentation)",
            "done": false
        },
        {
            "step": 9,
            "action": "If approved: Create src/lib/dsl/README.md documenting entry points, Nodes methods, Lines methods, AST helpers",
            "done": false
        },
        {
            "step": 10,
            "action": "git add and commit: 'Reorganize cli-style-validator into dsl/ and shared/ folders'",
            "done": false
        },
        {
            "step": 11,
            "action": "Add no-abbreviations naming rule to .claude/conventions.md under Naming section",
            "done": false
        },
        {
            "step": 12,
            "action": "git add and commit: 'Add no-abbreviations naming convention'",
            "done": false
        },
        {
            "step": 13,
            "action": "[CHECKPOINT] Confirm rename strategy: Query→Nodes, LineQuery→Lines, SourceQuery→SourceView (or fold into Source?)",
            "done": false
        },
        {
            "step": 14,
            "action": "In ast.js: rename Query function to Nodes, update all internal references",
            "done": false
        },
        {
            "step": 15,
            "action": "In source.js: rename LineQuery to Lines, update all internal references",
            "done": false
        },
        {
            "step": 16,
            "action": "In source.js: apply SourceQuery decision from checkpoint (rename or fold)",
            "done": false
        },
        {
            "step": 17,
            "action": "Find all rule files referencing Query, LineQuery, or SourceQuery types in comments/docs",
            "done": false
        },
        {
            "step": 18,
            "action": "Update any external references to use new type names",
            "done": false
        },
        {
            "step": 19,
            "action": "If README exists: Update to reflect new type names (Nodes, Lines)",
            "done": false
        },
        {
            "step": 20,
            "action": "Run style validator on changed files, fix any violations",
            "done": false
        },
        {
            "step": 21,
            "action": "Run full test suite to verify no regressions",
            "done": false
        },
        {
            "step": 22,
            "action": "git add and commit: 'Rename Query types to Nodes and Lines'",
            "done": false
        }
    ],
    "verification": [
        "All tests pass (yarn tap)",
        "All imports resolve correctly",
        "Style validator passes on all changed files",
        "conventions.md includes no-abbreviations rule",
        "If README approved: README.md documents the DSL API"
    ]
}
